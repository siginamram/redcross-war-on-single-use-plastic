<mat-card class="user-container">
 <div class="header-row">
    <div>
      <h2><mat-icon class="header-icon">group</mat-icon> Manage Users</h2>
      <p>View registered Users.</p>
    </div>
  </div>
<!-- Filter Section -->
<div class="filter-row">
  <mat-form-field appearance="outline">
    <mat-label>City</mat-label>
    <mat-select [(value)]="selectedCity" (selectionChange)="onCityChange()">
      <mat-option [value]="0">All</mat-option>
      <mat-option *ngFor="let city of cityList" [value]="city.cityID">{{ city.cityName }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Zone</mat-label>
    <mat-select [(value)]="selectedZone" (selectionChange)="onZoneChange()">
      <mat-option [value]="0">All</mat-option>
      <mat-option *ngFor="let zone of zoneList" [value]="zone.zoneID">{{ zone.zoneName }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Cluster</mat-label>
    <mat-select [(value)]="selectedCluster" (selectionChange)="onClusterChange()">
      <mat-option [value]="0">All</mat-option>
      <mat-option *ngFor="let cluster of clusterList" [value]="cluster.clusterId">{{ cluster.clusterName }}</mat-option>
    </mat-select>
  </mat-form-field>
</div>

  <div class="table-wrapper">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z2" style="width: 100%">

    <!-- S.NO -->
    <ng-container matColumnDef="sno">
      <th mat-header-cell *matHeaderCellDef><mat-icon>format_list_numbered</mat-icon> S.NO</th>
      <td mat-cell *matCellDef="let user; let i = index">{{ i + 1 + (paginator.pageIndex * paginator.pageSize)}}</td>
    </ng-container>

    <!-- Username -->
    <ng-container matColumnDef="username">
      <th mat-header-cell *matHeaderCellDef><mat-icon>person</mat-icon> Username</th>
      <td mat-cell *matCellDef="let user">{{ user.username }}</td>
    </ng-container>

    <!-- Password -->
    <ng-container matColumnDef="password">
      <th mat-header-cell *matHeaderCellDef><mat-icon>lock</mat-icon> Password</th>
      <td mat-cell *matCellDef="let user">{{ user.passwordHash }}</td>
    </ng-container>

    <!-- Role Name -->
    <ng-container matColumnDef="roleName">
      <th mat-header-cell *matHeaderCellDef><mat-icon>badge</mat-icon> Role</th>
      <td mat-cell *matCellDef="let user">{{ user.roleName }}</td>
    </ng-container>

    <!-- Full Name -->
    <ng-container matColumnDef="fullName">
      <th mat-header-cell *matHeaderCellDef><mat-icon>person_outline</mat-icon> Full Name</th>
      <td mat-cell *matCellDef="let user">{{ user.fullName }}</td>
    </ng-container>

    <!-- City -->
    <ng-container matColumnDef="city">
      <th mat-header-cell *matHeaderCellDef><mat-icon>location_city</mat-icon> City</th>
      <td mat-cell *matCellDef="let user">{{ user.cityName }}</td>
    </ng-container>

    <!-- Zone -->
    <ng-container matColumnDef="zone">
      <th mat-header-cell *matHeaderCellDef><mat-icon>map</mat-icon> Zone</th>
      <td mat-cell *matCellDef="let user">{{ user.zoneName }}</td>
    </ng-container>

    <!-- Cluster -->
    <ng-container matColumnDef="cluster">
      <th mat-header-cell *matHeaderCellDef><mat-icon>grid_on</mat-icon> Cluster</th>
      <td mat-cell *matCellDef="let user">{{ user.clusterName }}</td>
    </ng-container>

    <!-- School -->
    <ng-container matColumnDef="schoolName">
      <th mat-header-cell *matHeaderCellDef><mat-icon>school</mat-icon> School</th>
      <td mat-cell *matCellDef="let user">{{ user.schoolName }}</td>
    </ng-container>

    <!-- Action -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef><mat-icon>edit</mat-icon> Action</th>
      <td mat-cell *matCellDef="let user">
        <button mat-icon-button color="primary" (click)="openEditPopup(user)">
          <mat-icon>edit</mat-icon>
        </button>
      </td>
    </ng-container>

    <!-- Row Rendering -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    <!-- No Data Row -->
    <tr *matNoDataRow>
      <td [attr.colspan]="displayedColumns.length" class="no-data">
        <mat-icon>info</mat-icon> No data found.
      </td>
    </tr>
  </table>
</div>
  <!-- Paginator -->
  <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
</mat-card>

