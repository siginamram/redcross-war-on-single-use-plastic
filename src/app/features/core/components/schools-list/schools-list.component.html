<div class="school-list-container">
  <div class="header">
    <div>
      <h2>
        <mat-icon>school</mat-icon> Manage Schools
      </h2>
      <p>View registered schools or add a new one.</p>
    </div>
    <button mat-raised-button color="primary" [routerLink]="['/home/core/schools-form']"
      style="background-color: #2e7d32; color: white; border-radius: 10px;">
      <mat-icon>add_circle</mat-icon>
      Add School
    </button>
  </div>

<!-- Filters -->
<div class="filter-row">

  <!-- District Filter -->
  <mat-form-field appearance="outline">
    <mat-label>District</mat-label>
   <mat-select [(ngModel)]="selectedDistrictId" (selectionChange)="onDistrictChange()" [disabled]="disableDistrict">
      <mat-option [value]="0">All</mat-option>
      <mat-option *ngFor="let district of districts" [value]="district.districtID">{{ district.districtName }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- City Filter -->
  <mat-form-field appearance="outline">
    <mat-label>City</mat-label>
   <mat-select [(ngModel)]="selectedCityId" (selectionChange)="onCityChange($event.value)" [disabled]="disableCity">
      <mat-option [value]="0">All</mat-option>
      <mat-option *ngFor="let city of cities" [value]="city.cityID">{{ city.cityName }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Zone Filter -->
  <mat-form-field appearance="outline">
    <mat-label>Zone</mat-label>
    <mat-select [(ngModel)]="selectedZoneId" (selectionChange)="onZoneChange()" [disabled]="disableZone">
      <mat-option [value]="0">All</mat-option>
      <mat-option *ngFor="let zone of zones" [value]="zone.zoneID">{{ zone.zoneName }}</mat-option>
    </mat-select>
  </mat-form-field>

</div>


  <!-- Table -->
  <div class="table-container">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z2" multiTemplateDataRows>

      <!-- S.No -->
      <ng-container matColumnDef="sno">
        <th mat-header-cell *matHeaderCellDef class="green-header">
          <mat-icon class="green-icon">format_list_numbered</mat-icon> S.No
        </th>
        <td mat-cell *matCellDef="let row">
      {{ getRowNumber(row) }}
    </td>
      </ng-container>

      <ng-container matColumnDef="schoolName">
        <th mat-header-cell *matHeaderCellDef><mat-icon>domain</mat-icon> School Name</th>
        <td mat-cell *matCellDef="let row"> {{ row.schoolName }} </td>
      </ng-container>

      <ng-container matColumnDef="hodName">
        <th mat-header-cell *matHeaderCellDef><mat-icon>person</mat-icon> HOD Name</th>
        <td mat-cell *matCellDef="let row"> {{ row.hodName }} </td>
      </ng-container>

      <ng-container matColumnDef="hodPhone">
        <th mat-header-cell *matHeaderCellDef><mat-icon>call</mat-icon> HOD Phone</th>
        <td mat-cell *matCellDef="let row"> {{ row.hodPhone }} </td>
      </ng-container>

      <ng-container matColumnDef="contactPersonName">
        <th mat-header-cell *matHeaderCellDef><mat-icon>supervisor_account</mat-icon> Contact Person</th>
        <td mat-cell *matCellDef="let row"> {{ row.contactPersonName }} </td>
      </ng-container>

      <ng-container matColumnDef="contactPersonPhone">
        <th mat-header-cell *matHeaderCellDef><mat-icon>phone</mat-icon> Contact Phone</th>
        <td mat-cell *matCellDef="let row"> {{ row.contactPersonPhone }} </td>
      </ng-container>

      <ng-container matColumnDef="contactPersonDesignation">
        <th mat-header-cell *matHeaderCellDef><mat-icon>badge</mat-icon> Designation</th>
        <td mat-cell *matCellDef="let row"> {{ row.contactPersonDesignation }} </td>
      </ng-container>

      <ng-container matColumnDef="schoolTypeId">
        <th mat-header-cell *matHeaderCellDef><mat-icon>category</mat-icon> School Type</th>
        <td mat-cell *matCellDef="let row"> {{ row.schoolTypeName }} </td>
      </ng-container>

      <ng-container matColumnDef="schoolAddress">
        <th mat-header-cell *matHeaderCellDef><mat-icon>location_on</mat-icon> Address</th>
        <td mat-cell *matCellDef="let row"> {{ row.schoolAddress }} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef><mat-icon>edit</mat-icon> Actions</th>
        <td mat-cell *matCellDef="let row">
          <button mat-icon-button color="accent" (click)="editSchool(row)">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <div class="no-data" *ngIf="dataSource.data.length === 0">
      <p><mat-icon>info</mat-icon> No schools found for the selected filters.</p>
    </div>

    <!-- Paginator -->
   <div class="paginator-wrapper">
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
</div>
  </div>
</div>
